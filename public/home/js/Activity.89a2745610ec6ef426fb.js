webpackJsonp([8],{"43ii":function(t,e){},"4kLE":function(t,e){},VsUZ:function(t,e,n){"use strict";function i(t){return t&&t.data&&t.data.response||[]}var a=n("woOf"),r=n.n(a),s=n("Xxa5"),o=n.n(s),u=n("exGp"),c=n.n(u),p=n("mtWM"),d=n.n(p);d.a.defaults.headers["X-Requested-With"]="XMLHttpRequest";var v={getBanners:function(){var t=this;return c()(o.a.mark(function e(){var n,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/index/index/getBanner");case 2:if(n=t.sent,i=n.data,a=void 0===i?{}:i,1!==a.code){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},e,t)}))()},getHomeNewsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(o.a.mark(function a(){var r,s,u,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,d.a.post("/index/index/index",r);case 4:return s=t.sent,u=s.data,c=void 0===u?{}:u,t.abrupt("return",i(c));case 8:case"end":return t.stop()}},a,t)}))()},getLocationCity:function(t,e){var n=this;return c()(o.a.mark(function i(){var a,r,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.post("/index/index/getCity",{lat:t,lng:e});case 2:if(a=n.sent,r=a.data,s=void 0===r?{}:r,1!==s.code){n.next=7;break}return n.abrupt("return",s.data.city);case 7:return n.abrupt("return","");case 8:case"end":return n.stop()}},i,n)}))()},getWechatSign:function(t){var e=this;return c()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/index/jssdk/getSignPackage",{url:t});case 2:if(i=e.sent,a=i.data,r=void 0===a?{}:a,1!==r.code){e.next=7;break}return e.abrupt("return",r.data);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},n,e)}))()},getNewsList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return c()(o.a.mark(function r(){var s,u,c,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={channel_id:t,page:n},a&&(s.title=a),e.next=4,d.a.post("/index/index/newsList",s);case 4:return u=e.sent,c=u.data,p=void 0===c?{}:c,e.abrupt("return",i(p));case 8:case"end":return e.stop()}},r,e)}))()},getNewsDetail:function(t){var e=this;return c()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/index/index/newsdetails",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r&&r.data);case 6:case"end":return e.stop()}},n,e)}))()},getChannel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return c()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/index/index/getChannel",{parent_id:e});case 2:return i=t.sent,a=i.data,r=void 0===a?{}:a,t.abrupt("return",r.data);case 6:case"end":return t.stop()}},n,t)}))()},search:function(t){var e=this,n=t.url,a=t.title,s=void 0===a?"":a,u=t.options,p=void 0===u?{}:u;return c()(o.a.mark(function t(){var a,u,c,v;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r()({title:s},p),t.next=3,d.a.post(n,a);case 3:return u=t.sent,c=u.data,v=void 0===c?{}:c,t.abrupt("return",i(v));case 7:case"end":return t.stop()}},t,e)}))()},getQsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];return c()(o.a.mark(function a(){var r,s,u,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,d.a.post("/index/qs/index",r);case 4:return s=t.sent,u=s.data,c=void 0===u?{}:u,t.abrupt("return",i(c));case 8:case"end":return t.stop()}},a,t)}))()},getSelectConditions:function(){var t=this;return c()(o.a.mark(function e(){var n,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/index/activity/searchCondition");case 2:if(n=t.sent,i=n.data,a=void 0===i?{}:i,1!==a.code){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",{});case 8:case"end":return t.stop()}},e,t)}))()},getActivityList:function(t){var e=this,n=t.page,a=void 0===n?1:n,r=t.typeId,s=t.status;return c()(o.a.mark(function t(){var n,u,c,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:a},null!==r&&void 0!==r&&(n.type_id=r),null!==s&&void 0!==s&&(n.status=s),t.next=5,d.a.post("/index/activity/index",n);case 5:return u=t.sent,c=u.data,p=void 0===c?{}:c,t.abrupt("return",i(p));case 9:case"end":return t.stop()}},t,e)}))()},getActivityDetail:function(t){var e=this;return c()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/index/activity/details",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r.data&&r.data.response);case 6:case"end":return e.stop()}},n,e)}))()},appoitActivity:function(t){var e=this,n=t.id,i=t.name,a=t.phone;return c()(o.a.mark(function t(){var r,s,u,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={id:n,name:i,phone:a},t.next=3,d.a.post("/index/activity/reservationActivity",r);case 3:return s=t.sent,u=s.data,c=void 0===u?{}:u,t.abrupt("return",c);case 7:case"end":return t.stop()}},t,e)}))()},getMatrixCitys:function(){var t=this;return c()(o.a.mark(function e(){var n,a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/index/Matrix/index");case 2:return n=t.sent,a=n.data,r=void 0===a?{}:a,t.abrupt("return",i(r));case 6:case"end":return t.stop()}},e,t)}))()},getOffcialAccountList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return c()(o.a.mark(function a(){var r,s,u,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,status:n},e.next=3,d.a.post("/index/Matrix/wechatoffcialaccountsbyarea",r);case 3:return s=e.sent,u=s.data,c=void 0===u?{}:u,e.abrupt("return",i(c));case 7:case"end":return e.stop()}},a,e)}))()},getLiveList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(o.a.mark(function a(){var r,s,u,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,d.a.post("/index/live/index",r);case 4:return s=t.sent,u=s.data,c=void 0===u?{}:u,t.abrupt("return",i(c));case 8:case"end":return t.stop()}},a,t)}))()},getLiveDetail:function(t){var e=this;return c()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/index/live/details",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r.data&&r.data.response);case 6:case"end":return e.stop()}},n,e)}))()}};e.a=v},bC0G:function(t,e,n){"use strict";function i(t){n("pR1K")}function a(t){n("4kLE")}function r(t){n("43ii")}Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),o=n("3BeM"),u=n("v5o6"),c=n.n(u),p=n("mvHQ"),d=n.n(p),v=n("Xxa5"),l=n.n(v),h=n("exGp"),f=n.n(h),m=n("fZjL"),x=n.n(m),w=n("+v63"),g=n("te2A"),y=(Boolean,String,String,Boolean,Boolean,Boolean,String,String,Object,Boolean,{name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var t=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var e=t;t.popup=new w.a({showMask:e.showMask,container:e.$el,hideOnBlur:e.hideOnBlur,onOpen:function(){e.fixSafariOverflowScrolling("auto"),e.show=!0},onClose:function(){e.show=!1,window.__$vuxPopups&&x()(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){e.fixSafariOverflowScrolling("touch")},300)}}),t.value&&t.popup.show(),t.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(t){if(this.$overflowScrollingList.length)for(var e=0;e<this.$overflowScrollingList.length;e++)this.$overflowScrollingList[e].style.webkitOverflowScrolling=t},removeModalClassName:function(){"VIEW_BOX"===this.layout&&g.a.removeClass(document.body,"vux-modal-open")}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,show:this.value}},computed:{styles:function(){var t={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?t.width=this.width:t.height=this.height,this.maxHeight&&(t["max-height"]=this.maxHeight),this.isTransparent&&(t.background="transparent"),this.popupStyle)for(var e in this.popupStyle)t[e]=this.popupStyle[e];return t}},watch:{value:function(t){this.show=t},show:function(t){var e=this;this.$emit("input",t),t?(this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&g.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||e.fixSafariOverflowScrolling("touch"),e.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}}),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"vux-popup-animate-"+t.position}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&!t.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+t.position,t.show?"vux-popup-show":""],style:t.styles},[t._t("default")],2)])},_=[],S={render:b,staticRenderFns:_},k=S,C=n("VU/8"),$=i,O=C(y,k,!1,$,null,null),L=O.exports,B=n("Wqb0"),M=n.n(B),I=n("VsUZ"),D=n("oAV5"),A={name:"Activity",components:{Popup:L},data:function(){return{activityId:"",activity:{},visible:!1,username:"",phone:"",status:!1}},computed:{getAppointTime:function(){var t=this.activity,e=t.starttime,n=t.endtime;return Object(D.d)(e,n)},isDisabled:function(){return!(1==+this.activity.status)||this.status}},methods:{getActivityId:function(){this.activityId=M.a.parse().activityId},showPopup:function(){this.isDisabled||(this.visible=!0)},hidePopup:function(){this.visible=!1},fetchData:function(t){var e=this;return f()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.getActivityDetail(e.activityId);case 3:n=t.sent,n&&(e.activity=n,document.title=e.activity.title),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},appoint:function(){var t=this;return f()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.appoitActivity({id:t.activityId,name:t.username,phone:t.phone});case 3:if(n=e.sent,0!==n.code){e.next=6;break}return e.abrupt("return",t.$vux.toast.text("预约失败，请重新预约"));case 6:1===n.code&&n.data&&n.data.response.id?(t.status=!0,t.$vux.toast.text("预约成功"),t.saveLocalInfo()):t.$vux.toast.text("您已经预约过"),t.hidePopup(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()},handleSubmit:function(){this.checkFormData({username:this.username,phone:this.phone})&&this.appoint()},saveLocalInfo:function(){localStorage.setItem("activity_"+this.activityId,d()({username:this.username,phone:this.phone}))},getLocalInfo:function(){var t=localStorage.getItem("activity_"+this.activityId);if(t){var e=JSON.parse(t),n=e.username,i=e.phone;this.username=n,this.phone=i}},checkFormData:function(t){var e=t.username,n=void 0===e?"":e,i=t.phone,a=void 0===i?"":i;return n?a?!!/\d{11}/.test(a)||(this.$vux.toast.text("请填入合法的手机号哦"),!1):(this.$vux.toast.text("联系方式不能为空哦"),!1):(this.$vux.toast.text("姓名不能为空哦"),!1)}},created:function(){this.getActivityId(),this.fetchData()},mounted:function(){this.getLocalInfo()}},N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-activity"},[n("div",{staticClass:"p-activity-banner"},[n("div",{staticClass:"p-img-container"},[n("img",{attrs:{src:t.activity.image,alt:""}})])]),t._v(" "),n("div",{staticClass:"p-activity-header"},[n("div",{staticClass:"p-activity-title"},[t._v(t._s(t.activity.title))]),t._v(" "),n("div",{staticClass:"p-activity-count"},[n("div",{staticClass:"p-text"},[t._v(t._s(t.activity.people_count||0)+"人")])])]),t._v(" "),n("div",{staticClass:"p-activity-meta"},[n("div",{staticClass:"p-activity-time"},[t._v("活动时间："+t._s(t.activity.hour))]),t._v(" "),n("div",{staticClass:"p-activity-appoint-time"},[t._v(" 预约时间："+t._s(t.getAppointTime)+" ")]),t._v(" "),n("div",{staticClass:"p-activity-addr"},[t._v("活动地点："+t._s(t.activity.address))])]),t._v(" "),n("div",{staticClass:"p-activity-desc"},[t._m(0),t._v(" "),n("div",{staticClass:"p-activity-desc-content",domProps:{innerHTML:t._s(t.activity.content)}})]),t._v(" "),n("a",{class:["p-activity-btn",{disabled:t.isDisabled}],on:{click:t.showPopup}},[t._v("立即预约")]),t._v(" "),t.isDisabled?t._e():n("popup",{model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("div",{staticClass:"p-activity-popup"},[n("form",{staticClass:"p-form",attrs:{action:""}},[n("div",{staticClass:"p-form-title"},[t._v("信息填写")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入您的姓名",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phone,expression:"phone",modifiers:{trim:!0}}],staticClass:"p-input-phone",attrs:{type:"number",placeholder:"请输入您的联系方式",required:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("button",{staticClass:"p-activity-btn",attrs:{type:"button"},on:{click:t.handleSubmit}},[t._v("确认提交")])])])])],1)},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-activity-desc-title"},[n("span",[t._v("活动介绍")])])}],T={render:N,staticRenderFns:H},P=T,V=n("VU/8"),E=a,j=V(A,P,!1,E,null,null),q=j.exports,F={name:"app",components:{Index:q}},W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Index")],1)},R=[],U={render:W,staticRenderFns:R},X=U,Y=n("VU/8"),G=r,Z=Y(F,X,!1,G,null,null),J=Z.exports;c.a.attach(document.body),s.a.config.productionTip=!1,s.a.use(o.a),new s.a({render:function(t){return t(J)}}).$mount("#app-box")},kllH:function(t,e){},oAV5:function(t,e,n){"use strict";function i(){for(var t=(location.hash||"").split("#")[1].split("&"),e={},n=0;n<t.length;n++){var i=t[n].split("=");2===i.length&&(e[i[0]]=i[1])}return e}function a(t){return i()[t]}n.d(e,"d",function(){return o}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return c}),e.b=a;var r=n("ODCk"),s=function(t){return Object(r.a)(1e3*t,"YYYY-MM-DD")},o=function(t,e){var n=s(t),i=s(e);return n===i&&(n=Object(r.a)(1e3*t,"YYYY-MM-DD HH:mm"),i=Object(r.a)(1e3*e,"HH:mm")),n+" - "+i},u=function(t){return/^http/.test(t)||(t="http://"+t),t},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return t.length>e?t.substr(0,e)+"...":t}},pR1K:function(t,e){},rLAy:function(t,e,n){"use strict";function i(t){n("kllH")}var a=n("xNvf"),r=(a.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[a.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-toast"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),n("transition",{attrs:{name:t.currentTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[n("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?n("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):n("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},o=[],u={render:s,staticRenderFns:o},c=u,p=n("VU/8"),d=i,v=p(r,c,!1,d,null,null);e.a=v.exports}},["bC0G"]);
//# sourceMappingURL=Activity.89a2745610ec6ef426fb.js.map