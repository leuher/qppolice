webpackJsonp([4],{"/YG7":function(t,e,n){"use strict";function i(t){n("xkX1")}function a(t){n("4pGw")}function r(t){n("FGe6")}function s(t){n("ABP1")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),c=n("v5o6"),u=n.n(c),d=n("Xxa5"),l=n.n(d),v=n("exGp"),p=n.n(v),f=n("Bfwr"),h=n("qK+J"),x=n.n(h),m=n("VsUZ"),g=n("YxJB"),y=n("3Lt7"),w=(Object,g.a,y.a,{name:"Filters",props:{selectConditions:{type:Object,default:{}}},data:function(){return{typeId:"",status:"",other:""}},components:{Flexbox:g.a,FlexboxItem:y.a},methods:{onSelect:function(t,e){this.$emit("select",e,t.target.value)}}}),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flexbox",{staticClass:"p-filters"},[n("flexbox-item",{attrs:{span:1/3}},[n("div",{staticClass:"p-filters-item"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.typeId,expression:"typeId"}],staticClass:"p-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.typeId=e.target.multiple?n:n[0]},function(e){t.onSelect(e,"type")}]}},[n("option",{attrs:{value:"",selected:""}},[t._v("活动类别")]),t._v(" "),t._l(t.selectConditions["search-type"],function(e){return[n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])]})],2)])]),t._v(" "),n("flexbox-item",{attrs:{span:1/3}},[n("div",{staticClass:"p-filters-item"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"p-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.status=e.target.multiple?n:n[0]},function(e){t.onSelect(e,"status")}]}},[n("option",{attrs:{value:"",selected:""}},[t._v("活动进度")]),t._v(" "),t._l(t.selectConditions["search-status"],function(e){return[n("option",{key:e.status,domProps:{value:e.status}},[t._v(t._s(e.tag))])]})],2)])]),t._v(" "),n("flexbox-item",{attrs:{span:1/3}},[n("div",{staticClass:"p-filters-item"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.other,expression:"other"}],staticClass:"p-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.other=e.target.multiple?n:n[0]},function(e){t.onSelect(e,"other")}]}},[n("option",{attrs:{value:"",selected:""}},[t._v("其他")]),t._v(" "),t._l(t.selectConditions["search-other"],function(e){return[n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])]})],2)])])],1)},b=[],k={render:_,staticRenderFns:b},C=k,S=n("VU/8"),L=i,D=S(w,C,!1,L,null,null),A=D.exports,I=n("xzmO"),O=n("oAV5"),j=(Object,{name:"ActivityItem",props:{activity:Object},data:function(){return{activityDetailLink:I.a.activityDetailLink}},computed:{getAppointTime:function(){var t=this.activity,e=t.starttime,n=t.endtime;return Object(O.d)(e,n)}},methods:{formatBadge:function(t){switch(t){case 1:return this.activity["count-down"];case 2:return"已结束";default:return"未开始"}},formatStatus:function(t){switch(t){case 1:return"预约";case 2:return"终了";default:return"未开始"}}}}),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"p-activity-item",attrs:{href:t.activityDetailLink+"?activityId="+t.activity.id}},[n("div",{staticClass:"p-activity-item-banner"},[n("div",{class:["p-item-badge","p-badge__"+t.activity.status]},[t._v(t._s(t.formatBadge(t.activity.status)))]),t._v(" "),n("div",{staticClass:"p-img-container"},[n("img",{attrs:{src:t.activity.image,alt:""}})])]),t._v(" "),n("div",{staticClass:"p-activity-item-header"},[n("div",{class:["p-activity-item-status","p-status__"+t.activity.status]},[t._v(t._s(t.formatStatus(+t.activity.status)))]),t._v(" "),n("div",{staticClass:"p-activity-item-title"},[t._v(t._s(t.activity.title))]),t._v(" "),n("div",{staticClass:"p-activity-item-count"},[t._v(t._s(t.activity["Number-of-people"]||0)+"人")])]),t._v(" "),n("div",{staticClass:"p-activity-item-meta"},[n("div",{staticClass:"p-activity-item-time"},[t._v("活动时间："+t._s(t.activity.hour))]),t._v(" "),n("div",{staticClass:"p-activity-item-addr"},[t._v("活动地点："+t._s(t.activity.address))])])])},F=[],M={render:N,staticRenderFns:F},V=M,$=n("VU/8"),B=a,Y=$(j,V,!1,B,null,null),U=Y.exports,W=(f.a,x.a,{name:"ActivityList",components:{Loading:f.a,InfiniteLoading:x.a,Filters:A,ActivityItem:U},data:function(){return{listData:[],selectConditions:{},loading:!1,page:1,currentConditions:{typeId:void 0,status:void 0,other:void 0}}},methods:{setData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.listData.splice(0),this.listData=t},getOptions:function(){var t=this.currentConditions,e=t.typeId,n=t.status,i=t.other,a={page:this.page};return this.page++,void 0!==e&&(a.typeId=e),void 0!==n&&(a.status=n),void 0!==i&&(a.other=i),a},infiniteHandler:function(t){var e=this;return p()(l.a.mark(function n(){var i,a,r;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=e.getOptions(),n.next=4,m.a.getActivityList(i);case 4:a=n.sent,r=a.length,r>0?(e.listData=e.listData.concat(a),r<10?t.loaded():t.complete()):t.complete(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0);case 12:case"end":return n.stop()}},n,e,[[0,9]])}))()},getSelectConditions:function(){var t=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getSelectConditions();case 2:t.selectConditions=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},handleSelect:function(t,e){"type"===t&&(""!==e?this.currentConditions.typeId=+e:delete this.currentConditions.typeId),"status"===t&&(""!==e?this.currentConditions.status=+e:delete this.currentConditions.status),"other"===t&&(""!==e?this.currentConditions.other=e:delete this.currentConditions.other),this.page=1,this.fetchData()},fetchData:function(t,e){var n=this;return p()(l.a.mark(function t(){var e,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.loading=!0,t.prev=1,e=n.getOptions(),t.next=5,m.a.getActivityList(e);case 5:i=t.sent,n.setData(i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:n.loading=!1;case 13:case"end":return t.stop()}},t,n,[[1,9]])}))()}},mounted:function(){this.getSelectConditions(),this.fetchData()}}),R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-activity-list-wrap"},[n("Filters",{attrs:{selectConditions:t.selectConditions},on:{select:t.handleSelect}}),t._v(" "),n("Loading",{attrs:{show:t.loading,text:"加载中..."}}),t._v(" "),n("div",{staticClass:"p-activity-list"},[t._l(t.listData,function(t,e){return[n("ActivityItem",{key:e,attrs:{activity:t}})]})],2),t._v(" "),t.listData.length>0?n("infinite-loading",{attrs:{spinner:"circles"},on:{infinite:t.infiniteHandler}},[n("span",{attrs:{slot:"no-more"},slot:"no-more"},[t._v(" 没有更多数据哦～ ")]),t._v(" "),n("span",{attrs:{slot:"no-results"},slot:"no-results"},[t._v(" 没有更多数据哦～ ")])]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&t.listData.length<1,expression:"!loading && listData.length < 1"}],staticClass:"p-no-data"},[t._v("暂无数据～")])],1)},E=[],G={render:R,staticRenderFns:E},H=G,z=n("VU/8"),P=r,X=z(W,H,!1,P,null,null),q=X.exports,J={name:"app",components:{Index:q}},T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Index")],1)},Z=[],K={render:T,staticRenderFns:Z},Q=K,tt=n("VU/8"),et=s,nt=tt(J,Q,!1,et,null,null),it=nt.exports;u.a.attach(document.body),o.a.config.productionTip=!1,new o.a({render:function(t){return t(it)}}).$mount("#app-box")},"3Lt7":function(t,e,n){"use strict";var i=["-moz-box-","-webkit-box-",""],a=(Number,String,Number,String,["-moz-box-","-webkit-box-",""]),r={name:"flexbox-item",props:{span:[Number,String],order:[Number,String]},beforeMount:function(){this.bodyWidth=document.documentElement.offsetWidth},methods:{buildWidth:function(t){return"number"==typeof t?t<1?t:t/12:"string"==typeof t?t.replace("px","")/this.bodyWidth:void 0}},computed:{style:function(){var t={},e="horizontal"===this.$parent.orient?"marginLeft":"marginTop";if(1*this.$parent.gutter!=0&&(t[e]=this.$parent.gutter+"px"),this.span)for(var n=0;n<a.length;n++)t[a[n]+"flex"]="0 0 "+100*this.buildWidth(this.span)+"%";return void 0!==this.order&&(t.order=this.order),t}},data:function(){return{bodyWidth:0}}},s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox-item",style:t.style},[t._t("default")],2)},o=[],c={render:s,staticRenderFns:o},u=c,d=n("VU/8"),l=d(r,u,!1,null,null,null);e.a=l.exports},"4pGw":function(t,e){},"5U4V":function(t,e){},ABP1:function(t,e){},Bfwr:function(t,e,n){"use strict";function i(t){n("SiiM")}var a=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}}),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading"},[n("div",{staticClass:"weui-mask_transparent"}),t._v(" "),n("div",{staticClass:"weui-toast",style:{position:t.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),n("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2)])])])},s=[],o={render:r,staticRenderFns:s},c=o,u=n("VU/8"),d=i,l=u(a,c,!1,d,null,null);e.a=l.exports},FGe6:function(t,e){},SiiM:function(t,e){},VsUZ:function(t,e,n){"use strict";function i(t){return t&&t.data&&t.data.response||[]}var a=n("woOf"),r=n.n(a),s=n("Xxa5"),o=n.n(s),c=n("exGp"),u=n.n(c),d=n("mtWM"),l=n.n(d);l.a.defaults.headers["X-Requested-With"]="XMLHttpRequest";var v={getBanners:function(){var t=this;return u()(o.a.mark(function e(){var n,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("/index/index/getBanner");case 2:if(n=t.sent,i=n.data,a=void 0===i?{}:i,1!==a.code){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}},e,t)}))()},getHomeNewsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u()(o.a.mark(function a(){var r,s,c,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,l.a.post("/index/index/index",r);case 4:return s=t.sent,c=s.data,u=void 0===c?{}:c,t.abrupt("return",i(u));case 8:case"end":return t.stop()}},a,t)}))()},getLocationCity:function(t,e){var n=this;return u()(o.a.mark(function i(){var a,r,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.post("/index/index/getCity",{lat:t,lng:e});case 2:if(a=n.sent,r=a.data,s=void 0===r?{}:r,1!==s.code){n.next=7;break}return n.abrupt("return",s.data.city);case 7:return n.abrupt("return","");case 8:case"end":return n.stop()}},i,n)}))()},getWechatSign:function(t){var e=this;return u()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/index/jssdk/getSignPackage",{url:t});case 2:if(i=e.sent,a=i.data,r=void 0===a?{}:a,1!==r.code){e.next=7;break}return e.abrupt("return",r.data);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},n,e)}))()},getNewsList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return u()(o.a.mark(function r(){var s,c,u,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={channel_id:t,page:n},a&&(s.title=a),e.next=4,l.a.post("/index/index/newsList",s);case 4:return c=e.sent,u=c.data,d=void 0===u?{}:u,e.abrupt("return",i(d));case 8:case"end":return e.stop()}},r,e)}))()},getNewsDetail:function(t){var e=this;return u()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/index/index/newsdetails",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r&&r.data);case 6:case"end":return e.stop()}},n,e)}))()},getChannel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return u()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.post("/index/index/getChannel",{parent_id:e});case 2:return i=t.sent,a=i.data,r=void 0===a?{}:a,t.abrupt("return",r.data);case 6:case"end":return t.stop()}},n,t)}))()},search:function(t){var e=this,n=t.url,a=t.title,s=void 0===a?"":a,c=t.options,d=void 0===c?{}:c;return u()(o.a.mark(function t(){var a,c,u,v;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r()({title:s},d),t.next=3,l.a.post(n,a);case 3:return c=t.sent,u=c.data,v=void 0===u?{}:u,t.abrupt("return",i(v));case 7:case"end":return t.stop()}},t,e)}))()},getQsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];return u()(o.a.mark(function a(){var r,s,c,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,l.a.post("/index/qs/index",r);case 4:return s=t.sent,c=s.data,u=void 0===c?{}:c,t.abrupt("return",i(u));case 8:case"end":return t.stop()}},a,t)}))()},getSelectConditions:function(){var t=this;return u()(o.a.mark(function e(){var n,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("/index/activity/searchCondition");case 2:if(n=t.sent,i=n.data,a=void 0===i?{}:i,1!==a.code){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",{});case 8:case"end":return t.stop()}},e,t)}))()},getActivityList:function(t){var e=this,n=t.page,a=void 0===n?1:n,r=t.typeId,s=t.status;return u()(o.a.mark(function t(){var n,c,u,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:a},null!==r&&void 0!==r&&(n.type_id=r),null!==s&&void 0!==s&&(n.status=s),t.next=5,l.a.post("/index/activity/index",n);case 5:return c=t.sent,u=c.data,d=void 0===u?{}:u,t.abrupt("return",i(d));case 9:case"end":return t.stop()}},t,e)}))()},getActivityDetail:function(t){var e=this;return u()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/index/activity/details",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r.data&&r.data.response);case 6:case"end":return e.stop()}},n,e)}))()},appoitActivity:function(t){var e=this,n=t.id,i=t.name,a=t.phone;return u()(o.a.mark(function t(){var r,s,c,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={id:n,name:i,phone:a},t.next=3,l.a.post("/index/activity/reservationActivity",r);case 3:return s=t.sent,c=s.data,u=void 0===c?{}:c,t.abrupt("return",u);case 7:case"end":return t.stop()}},t,e)}))()},getMatrixCitys:function(){var t=this;return u()(o.a.mark(function e(){var n,a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("/index/Matrix/index");case 2:return n=t.sent,a=n.data,r=void 0===a?{}:a,t.abrupt("return",i(r));case 6:case"end":return t.stop()}},e,t)}))()},getOffcialAccountList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u()(o.a.mark(function a(){var r,s,c,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,status:n},e.next=3,l.a.post("/index/Matrix/wechatoffcialaccountsbyarea",r);case 3:return s=e.sent,c=s.data,u=void 0===c?{}:c,e.abrupt("return",i(u));case 7:case"end":return e.stop()}},a,e)}))()},getLiveList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u()(o.a.mark(function a(){var r,s,c,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e},n&&(r.title=n),t.next=4,l.a.post("/index/live/index",r);case 4:return s=t.sent,c=s.data,u=void 0===c?{}:c,t.abrupt("return",i(u));case 8:case"end":return t.stop()}},a,t)}))()},getLiveDetail:function(t){var e=this;return u()(o.a.mark(function n(){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/index/live/details",{id:t});case 2:return i=e.sent,a=i.data,r=void 0===a?{}:a,e.abrupt("return",r.data&&r.data.response);case 6:case"end":return e.stop()}},n,e)}))()}};e.a=v},YxJB:function(t,e,n){"use strict";function i(t){n("5U4V")}var a=(Number,String,String,String,String,String,{name:"flexbox",props:{gutter:{type:Number,default:8},orient:{type:String,default:"horizontal"},justify:String,align:String,wrap:String,direction:String},computed:{styles:function(){return{"justify-content":this.justify,"-webkit-justify-content":this.justify,"align-items":this.align,"-webkit-align-items":this.align,"flex-wrap":this.wrap,"-webkit-flex-wrap":this.wrap,"flex-direction":this.direction,"-webkit-flex-direction":this.direction}}}}),r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox",class:{"vux-flex-col":"vertical"===t.orient,"vux-flex-row":"horizontal"===t.orient},style:t.styles},[t._t("default")],2)},s=[],o={render:r,staticRenderFns:s},c=o,u=n("VU/8"),d=i,l=u(a,c,!1,d,null,null);e.a=l.exports},oAV5:function(t,e,n){"use strict";function i(){for(var t=(location.hash||"").split("#")[1].split("&"),e={},n=0;n<t.length;n++){var i=t[n].split("=");2===i.length&&(e[i[0]]=i[1])}return e}function a(t){return i()[t]}n.d(e,"d",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return u}),e.b=a;var r=n("ODCk"),s=function(t){return Object(r.a)(1e3*t,"YYYY-MM-DD")},o=function(t,e){var n=s(t),i=s(e);return n===i&&(n=Object(r.a)(1e3*t,"YYYY-MM-DD HH:mm"),i=Object(r.a)(1e3*e,"HH:mm")),n+" - "+i},c=function(t){return/^http/.test(t)||(t="http://"+t),t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return t.length>e?t.substr(0,e)+"...":t}},xkX1:function(t,e){},xzmO:function(t,e,n){"use strict";var i={homeLink:"/index/index/index",newsDetailsLink:"/index/index/newsdetails",newslistLink:"/index/index/newslist",matrixLink:"/index/matrix/index",activityListLink:"/index/activity/index",activityDetailLink:"/index/activity/details",liveListLink:"/index/live/index",liveLink:"/index/live/details"};e.a=i}},["/YG7"]);
//# sourceMappingURL=ActivityList.aad643d97a3bf56eb538.js.map